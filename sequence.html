<html>
  <head>
        <title>Crazy train!</title>
    <!--Load the AJAX API-->
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript" src="javascripts/crazytrain.js"></script>
    <script type="text/javascript">
    
    // Load the Visualization API and the piechart package.
    google.load('visualization', '1.0', {'packages':['corechart']});
      
    // Set a callback to run when the Google Visualization API is loaded.
    google.setOnLoadCallback();
        
        /*
         * Set configurations and draw the chart
         */
        function drawChart() {
        var chart = new google.visualization.LineChart(
                document.getElementById('chart_div'));
                
            var options = {width: 400,
                       height: 300,
                                           interpolateNulls: true,
                                           pointSize: 2,
                                           vAxis: {format: '##'}
                                           };
                                           
                chart.draw(createDataTable(getTrains(getInput())), options);
    }
    
            function drawChart2() {
                    var options = {
                            width: 400,
                        height: 300,
                        interpolateNulls: true,
                        pointSize: 2,
                        vAxis: {format: '##'}
                };
                    var container = document.getElementById('plots_container');
                    // Clear old plots
                    container.innerHTML = "";
                    // Break the input into multiple steps
                    var inputSteps = getInput().split("===");
                    for (var i = 0; i < inputSteps.length; i++) {
                            if (i % 3 == 0) {
                                    var row = createRowDiv();
                                    container.appendChild(row);
                            }
                            var chartDiv = createChartDiv(i);
                            row.appendChild(chartDiv);
                            var chart = new google.visualization.LineChart(chartDiv);
                            chart.draw(createDataTable(getTrains(inputSteps[i])), options);
                    }
            }
            
            
            /*
            * Create the row element where the chart divs will be placed
            */
            function createRowDiv() {
                    var row = document.createElement("div");
                    row.style.display = "table-row";
                    return row;
            }
            
            /*
            * Create the div element where the chart will be placed
            */
            function createChartDiv(i) {
                    var chartDiv = document.createElement("div");
                    chartDiv.id = "chart_div" + i;
                    chartDiv.style.width = 400;
                    chartDiv.style.height = 300;
                    chartDiv.style.display = "table-cell";
                    return chartDiv;
            }
        
        /*
         * Return the input text from the textarea.
         */
        function getInput() {
                return document.getElementById('input').value;
        }
    </script>
  </head>

  <body>
        <div style="width: 100%; display: table;">
                <div style="display: table-row; text-align: center">
                        <h1>Crazy train - Sequence</h1>
                </div>
                <div style="display: table-row">
                        <div style="width:400; height:300; display: table-cell">
                                <form>
                                        <textarea id="input" rows="35" cols="60"></textarea>
                                        <input type="button" value="Plot" onClick="drawChart2();">
                                </form>
                        </div>
                </div>
        </div>
        <div id="plots_container" style="width: 100%; display: table;">
        </div>
  </body>
</html>
